<ion-list [inset]="true">
  <ion-list-header>
    <ion-label>Permissions</ion-label>
  </ion-list-header>
  <ion-item button [detail]="true" (click)="permissionChooserIsOpen = true">
    <ion-label>{{ checkPermission.name }}</ion-label>
  </ion-item>
  <ion-item button [detail]="true" (click)="checkAllPermissions()">
    <ion-label>{{ checkAllPermissions.name }}</ion-label>
  </ion-item>
  @if (Capacitor.getPlatform() === "android") {
    <ion-item button [detail]="true" (click)="requestReadOnlyCalendarAccess()">
      <ion-label>{{ requestReadOnlyCalendarAccess.name }}</ion-label>
    </ion-item>
  }
  <ion-item button [detail]="true" (click)="requestWriteOnlyCalendarAccess()">
    <ion-label>{{ requestWriteOnlyCalendarAccess.name }}</ion-label>
  </ion-item>
  <ion-item button [detail]="true" (click)="requestFullCalendarAccess()">
    <ion-label>{{ requestFullCalendarAccess.name }}</ion-label>
  </ion-item>
  <ion-item button [detail]="true" (click)="requestFullRemindersAccess()">
    <ion-label>{{ requestFullRemindersAccess.name }}</ion-label>
  </ion-item>
  <ion-item button [detail]="true" (click)="requestAllPermissions()">
    <ion-label>{{ requestAllPermissions.name }}</ion-label>
  </ion-item>

  <ion-list-header>
    <ion-label>Calendars</ion-label>
  </ion-list-header>
  <ion-item button [detail]="true" (click)="listCalendars()">
    <ion-label>{{ listCalendars.name }} [all]</ion-label>
  </ion-item>
  <ion-item button [detail]="true" (click)="listCalendars({ access: 1 })">
    <ion-label>{{ listCalendars.name }} [writable]</ion-label>
  </ion-item>
  <ion-item button [detail]="true" (click)="getDefaultCalendar()">
    <ion-label>{{ getDefaultCalendar.name }}</ion-label>
  </ion-item>
  @if (Capacitor.getPlatform() === "ios") {
    <ion-item button [detail]="true" (click)="calendarChooserIsOpen = true">
      <ion-label>{{ selectCalendarsWithPrompt.name }}</ion-label>
    </ion-item>
    <ion-item button [detail]="true" (click)="createCalendar()">
      <ion-label>{{ createCalendar.name }}</ion-label>
    </ion-item>
    <ion-item button [detail]="true" (click)="deleteCalendar()">
      <ion-label>{{ deleteCalendar.name }}</ion-label>
    </ion-item>
  }
  <ion-item button [detail]="true" (click)="openCalendar()">
    <ion-label>{{ openCalendar.name }}</ion-label>
  </ion-item>

  <ion-list-header>
    <ion-label>Events</ion-label>
  </ion-list-header>
  <ion-item button [detail]="true" (click)="createEvent()">
    <ion-label>{{ createEvent.name }}</ion-label>
  </ion-item>
  <ion-item button [detail]="true" (click)="createEventWithPrompt()">
    <ion-label>{{ createEventWithPrompt.name }}</ion-label>
  </ion-item>
  <ion-item button [detail]="true" (click)="listEventsInRange()">
    <ion-label>{{ listEventsInRange.name }}</ion-label>
  </ion-item>
  <ion-item
    button
    [detail]="true"
    (click)="eventsListViewModalComponent.present()"
  >
    <ion-label>{{ deleteEventsById.name }}</ion-label>
  </ion-item>

  @if (Capacitor.getPlatform() === "ios") {
    <ion-list-header>
      <ion-label>Reminders</ion-label>
    </ion-list-header>
    <ion-item button [detail]="true" (click)="createReminder()">
      <ion-label>{{ createReminder.name }}</ion-label>
    </ion-item>
    <ion-item button [detail]="true" (click)="getRemindersLists()">
      <ion-label>{{ getRemindersLists.name }}</ion-label>
    </ion-item>
    <ion-item button [detail]="true" (click)="getDefaultRemindersList()">
      <ion-label>{{ getDefaultRemindersList.name }}</ion-label>
    </ion-item>
    <ion-item button [detail]="true" (click)="openReminders()">
      <ion-label>{{ openReminders.name }}</ion-label>
    </ion-item>
  }
</ion-list>

<ion-modal
  #calendarChooserModal
  [isOpen]="calendarChooserIsOpen"
  (didDismiss)="onDidDismissCalendarChooser($event)"
>
  <ng-template>
    <ion-toolbar>
      <ion-buttons slot="start">
        <ion-button (click)="calendarChooserModal.dismiss(null, 'cancel')"
          >Cancel</ion-button
        >
      </ion-buttons>
      <ion-buttons slot="end">
        <ion-button (click)="calendarChooserModal.dismiss(null, 'confirm')"
          >Select</ion-button
        >
      </ion-buttons>
    </ion-toolbar>
    <ion-picker>
      <ion-picker-column
        [value]="selectionStyle"
        (ionChange)="onSelectionStyleDidChange($event.detail.value)"
      >
        <ion-picker-column-option [value]="CalendarChooserSelectionStyle.SINGLE"
          >Single</ion-picker-column-option
        >
        <ion-picker-column-option
          [value]="CalendarChooserSelectionStyle.MULTIPLE"
          >Multiple</ion-picker-column-option
        >
      </ion-picker-column>
      <ion-picker-column
        [value]="displayStyle"
        (ionChange)="onDisplayStyleDidChange($event.detail.value)"
      >
        <ion-picker-column-option
          [value]="CalendarChooserDisplayStyle.ALL_CALENDARS"
          >All calendars</ion-picker-column-option
        >
        <ion-picker-column-option
          [value]="CalendarChooserDisplayStyle.WRITABLE_CALENDARS_ONLY"
          >Writeable only</ion-picker-column-option
        >
      </ion-picker-column>
    </ion-picker>
  </ng-template>
</ion-modal>

<ion-modal
  #permissionChooserModal
  [isOpen]="permissionChooserIsOpen"
  (didDismiss)="onDidDismissPermissionChooser($event)"
>
  <ng-template>
    <ion-toolbar>
      <ion-buttons slot="start">
        <ion-button (click)="permissionChooserModal.dismiss(null, 'cancel')"
          >Cancel</ion-button
        >
      </ion-buttons>
      <ion-buttons slot="end">
        <ion-button (click)="permissionChooserModal.dismiss(null, 'confirm')"
          >Select</ion-button
        >
      </ion-buttons>
    </ion-toolbar>
    <ion-picker>
      <ion-picker-column
        [value]="permissionToCheck"
        (ionChange)="onPermissionDidChange($event.detail.value)"
      >
        <ion-picker-column-option [value]="PluginPermission.READ_CALENDAR"
          >readCalendar</ion-picker-column-option
        >
        <ion-picker-column-option [value]="PluginPermission.WRITE_CALENDAR"
          >writeCalendar</ion-picker-column-option
        >
        <ion-picker-column-option [value]="PluginPermission.READ_REMINDERS"
          >readReminders</ion-picker-column-option
        >
        <ion-picker-column-option [value]="PluginPermission.WRITE_REMINDERS"
          >writeReminders</ion-picker-column-option
        >
      </ion-picker-column>
    </ion-picker>
  </ng-template>
</ion-modal>

<app-events-list-view-modal
  #eventsListViewModalComponent
  (deleteEvents)="deleteEventsById($event)"
></app-events-list-view-modal>
